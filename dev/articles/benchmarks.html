<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Benchmarks • nanoparquet</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="benchmarks_files/libs/quarto-html/popper.min.js"></script><script src="benchmarks_files/libs/quarto-html/tippy.umd.min.js"></script><link href="benchmarks_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="benchmarks_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Benchmarks">
<meta name="robots" content="noindex">
<script defer data-domain="nanoparquet.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nanoparquet</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/benchmarks.html">Benchmarks</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/01/nanoparquet-0-4-0/">Version 0.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/06/nanoparquet-0-3-0/">Version 0.3.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/nanoparquet/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Benchmarks</h1>




      <small class="dont-index">Source: <a href="https://github.com/r-lib/nanoparquet/blob/main/vignettes/articles/benchmarks.qmd" class="external-link"><code>vignettes/articles/benchmarks.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <section class="level2"><h2 id="goals">Goals<a class="anchor" aria-label="anchor" href="#goals"></a>
</h2>
<p>First, I want to measure nanoparquet’s speed relative to good quality CSV readers and writers, and also look at the sizes of the Parquet and CSV files.</p>
<p>Second, I want to see how nanoparquet fares relative to other Parquet implementations available from R.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jthomasmock/gtExtras" class="external-link">gtExtras</a></span><span class="op">)</span></span></code></pre></div>
</section><section class="level2"><h2 id="data-sets">Data sets<a class="anchor" aria-label="anchor" href="#data-sets"></a>
</h2>
<p>I used use three data sets: small, medium and large. The small data set is the <code><a href="https://rdrr.io/pkg/nycflights13/man/flights.html" class="external-link">nycflights13::flights</a></code> data set, as is. The medium data set contains 20 copies of the small data set. The large data set contains 200 copies of the small data set. See the <code>gen_data()</code> function in the <a href="https://github.com/r-lib/nanoparquet/blob/main/vignettes/articles/benchmarks-funcs.R" class="external-link"><code>benchmark-funcs.R</code> file</a> in the nanoparquet GitHub repository.</p>
<p>Some basic information about each data set:</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"data-info.parquet"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">info_tab</span> <span class="op">&lt;-</span> <span class="fu">nanoparquet</span><span class="fu">::</span><span class="fu"><a href="../reference/read_parquet.html">read_parquet</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"data-info.parquet"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">get_data_info</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  <span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">data_sizes</span>, <span class="kw">function</span><span class="op">(</span><span class="va">s</span><span class="op">)</span> <span class="fu">get_data_info</span><span class="op">(</span><span class="fu">gen_data</span><span class="op">(</span><span class="va">s</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">info_tab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    check.names <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    name <span class="op">=</span> <span class="va">data_sizes</span>,</span>
<span>    rows <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">info</span>, <span class="st">"[["</span>, <span class="st">"dim"</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>,</span>
<span>    columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">info</span>, <span class="st">"[["</span>, <span class="st">"dim"</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span>,<span class="op">]</span>,</span>
<span>    <span class="st">"size in memory"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">info</span>, <span class="st">"[["</span>, <span class="st">"size"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="fu">nanoparquet</span><span class="fu">::</span><span class="fu"><a href="../reference/write_parquet.html">write_parquet</a></span><span class="op">(</span><span class="va">info_tab</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"data-info.parquet"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">info_tab</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Data sets"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html" class="external-link">tab_options</a></span><span class="op">(</span>table.align <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_integer.html" class="external-link">fmt_integer</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_bytes.html" class="external-link">fmt_bytes</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="st">"size in memory"</span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div id="rnqmtgmsgc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rnqmtgmsgc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rnqmtgmsgc thead, #rnqmtgmsgc tbody, #rnqmtgmsgc tfoot, #rnqmtgmsgc tr, #rnqmtgmsgc td, #rnqmtgmsgc th {
  border-style: none;
}

#rnqmtgmsgc p {
  margin: 0;
  padding: 0;
}

#rnqmtgmsgc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rnqmtgmsgc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rnqmtgmsgc .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rnqmtgmsgc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rnqmtgmsgc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rnqmtgmsgc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rnqmtgmsgc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rnqmtgmsgc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rnqmtgmsgc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rnqmtgmsgc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rnqmtgmsgc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rnqmtgmsgc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rnqmtgmsgc .gt_spanner_row {
  border-bottom-style: hidden;
}

#rnqmtgmsgc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rnqmtgmsgc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rnqmtgmsgc .gt_from_md > :first-child {
  margin-top: 0;
}

#rnqmtgmsgc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rnqmtgmsgc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rnqmtgmsgc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rnqmtgmsgc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rnqmtgmsgc .gt_row_group_first td {
  border-top-width: 2px;
}

#rnqmtgmsgc .gt_row_group_first th {
  border-top-width: 2px;
}

#rnqmtgmsgc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnqmtgmsgc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rnqmtgmsgc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rnqmtgmsgc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rnqmtgmsgc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnqmtgmsgc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rnqmtgmsgc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rnqmtgmsgc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rnqmtgmsgc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rnqmtgmsgc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rnqmtgmsgc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnqmtgmsgc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rnqmtgmsgc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rnqmtgmsgc .gt_left {
  text-align: left;
}

#rnqmtgmsgc .gt_center {
  text-align: center;
}

#rnqmtgmsgc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rnqmtgmsgc .gt_font_normal {
  font-weight: normal;
}

#rnqmtgmsgc .gt_font_bold {
  font-weight: bold;
}

#rnqmtgmsgc .gt_font_italic {
  font-style: italic;
}

#rnqmtgmsgc .gt_super {
  font-size: 65%;
}

#rnqmtgmsgc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rnqmtgmsgc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rnqmtgmsgc .gt_indent_1 {
  text-indent: 5px;
}

#rnqmtgmsgc .gt_indent_2 {
  text-indent: 10px;
}

#rnqmtgmsgc .gt_indent_3 {
  text-indent: 15px;
}

#rnqmtgmsgc .gt_indent_4 {
  text-indent: 20px;
}

#rnqmtgmsgc .gt_indent_5 {
  text-indent: 25px;
}

#rnqmtgmsgc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rnqmtgmsgc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border">Data sets</th>
</tr>
<tr class="gt_col_headings even">
<th id="name" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">name</th>
<th id="rows" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">rows</th>
<th id="columns" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">columns</th>
<th id="size-in-memory" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">size in memory</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="name">small</td>
<td class="gt_row gt_right" headers="rows">336,776</td>
<td class="gt_row gt_right" headers="columns">19</td>
<td class="gt_row gt_right" headers="size in memory">40.7 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="name">medium</td>
<td class="gt_row gt_right" headers="rows">6,735,520</td>
<td class="gt_row gt_right" headers="columns">19</td>
<td class="gt_row gt_right" headers="size in memory">808.5 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="name">large</td>
<td class="gt_row gt_right" headers="rows">67,355,200</td>
<td class="gt_row gt_right" headers="columns">19</td>
<td class="gt_row gt_right" headers="size in memory">8.1 GB</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A quick look at the data:</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu">nycflights13</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/nycflights13/man/flights.html" class="external-link">flights</a></span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code><span><span class="co">#&gt; # A tibble: 6 × 19</span></span>
<span><span class="co">#&gt;    year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2013     1     1      517            515         2      830            819</span></span>
<span><span class="co">#&gt; 2  2013     1     1      533            529         4      850            830</span></span>
<span><span class="co">#&gt; 3  2013     1     1      542            540         2      923            850</span></span>
<span><span class="co">#&gt; 4  2013     1     1      544            545        -1     1004           1022</span></span>
<span><span class="co">#&gt; 5  2013     1     1      554            600        -6      812            837</span></span>
<span><span class="co">#&gt; 6  2013     1     1      554            558        -4      740            728</span></span>
<span><span class="co">#&gt; # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</span></span></code></pre>
</div>
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="fu">nycflights13</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/nycflights13/man/flights.html" class="external-link">flights</a></span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code><span><span class="co">#&gt; Rows: 336,776</span></span>
<span><span class="co">#&gt; Columns: 19</span></span>
<span><span class="co">#&gt; $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…</span></span>
<span><span class="co">#&gt; $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</span></span>
<span><span class="co">#&gt; $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</span></span>
<span><span class="co">#&gt; $ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, …</span></span>
<span><span class="co">#&gt; $ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, …</span></span>
<span><span class="co">#&gt; $ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1…</span></span>
<span><span class="co">#&gt; $ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,…</span></span>
<span><span class="co">#&gt; $ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,…</span></span>
<span><span class="co">#&gt; $ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1…</span></span>
<span><span class="co">#&gt; $ carrier        &lt;chr&gt; "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV", "B6", "…</span></span>
<span><span class="co">#&gt; $ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4…</span></span>
<span><span class="co">#&gt; $ tailnum        &lt;chr&gt; "N14228", "N24211", "N619AA", "N804JB", "N668DN", "N394…</span></span>
<span><span class="co">#&gt; $ origin         &lt;chr&gt; "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR", "LGA",…</span></span>
<span><span class="co">#&gt; $ dest           &lt;chr&gt; "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL", "IAD",…</span></span>
<span><span class="co">#&gt; $ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1…</span></span>
<span><span class="co">#&gt; $ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, …</span></span>
<span><span class="co">#&gt; $ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6…</span></span>
<span><span class="co">#&gt; $ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0…</span></span>
<span><span class="co">#&gt; $ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0…</span></span></code></pre>
</div>
</div>
</section><section class="level2"><h2 id="parquet-implementations">Parquet implementations<a class="anchor" aria-label="anchor" href="#parquet-implementations"></a>
</h2>
<p>I ran nanoparquet, Arrow and DuckDB. I also ran data.table without and with compression and readr, to read/write CSV files. I used the running time of readr as the baseline.</p>
<p>I ran each benchmark three times and record the results of the third run. This is to make sure that the data and the software is not swapped out by the OS. (Except for readr on the large data set, because it would take too long.)</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"results.parquet"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">nanoparquet</span><span class="fu">::</span><span class="fu"><a href="../reference/read_parquet.html">read_parquet</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"results.parquet"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">results</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">data_sizes</span>, <span class="kw">function</span><span class="op">(</span><span class="va">s</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">variants</span>, <span class="kw">function</span><span class="op">(</span><span class="va">v</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">r</span> <span class="op">&lt;-</span> <span class="kw">if</span> <span class="op">(</span><span class="va">v</span> <span class="op">==</span> <span class="st">"readr"</span> <span class="op">&amp;&amp;</span> <span class="va">s</span> <span class="op">==</span> <span class="st">"large"</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="fu">measure</span><span class="op">(</span><span class="va">v</span>, <span class="va">s</span><span class="op">)</span></span>
<span>      <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="fu">measure</span><span class="op">(</span><span class="va">v</span>, <span class="va">s</span><span class="op">)</span></span>
<span>        <span class="fu">measure</span><span class="op">(</span><span class="va">v</span>, <span class="va">s</span><span class="op">)</span></span>
<span>        <span class="fu">measure</span><span class="op">(</span><span class="va">v</span>, <span class="va">s</span><span class="op">)</span></span>
<span>      <span class="op">}</span></span>
<span>      <span class="va">results</span> <span class="op">&lt;&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">results</span>, <span class="va">r</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="fu">nanoparquet</span><span class="fu">::</span><span class="fu"><a href="../reference/write_parquet.html">write_parquet</a></span><span class="op">(</span><span class="va">results</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"results.parquet"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</details>
</div>
<p>I include the complete raw results at the end of this article.</p>
</section><section class="level2"><h2 id="parquet-vs-csv">Parquet vs CSV<a class="anchor" aria-label="anchor" href="#parquet-vs-csv"></a>
</h2>
<!-- For most use cases the Parquet format is superior to CSV files:

- Parquet has a rich type system, including native support for missing
  values.
- Parquet is binary, (possibly) efficiently encoded, (usually) compressed,
  so Parquet files are typicallly smaller, and faster to read and write.
- Parquet better supports reading subsets of rows or columns from a file,
  even through HTTP if you like.

One (the only?) great advantage of CSV files is that they are line-oriented
text files, so you can view and manipulate them with a lot of tools.
(As long as they can operate on large files, if your files are large.)

Being a simple format, CSV is also easy and fast to write, even
concurrently. -->
<p>The results, focusing on the CSV readers and nanoparquet:</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">csv_tab_read</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">software</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nanoparquet"</span>, <span class="st">"data.table"</span>, <span class="st">"data.table.gz"</span>, <span class="st">"readr"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">direction</span> <span class="op">==</span> <span class="st">"read"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>software <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">software</span> <span class="op">==</span>  <span class="st">"data.table.gz"</span> <span class="op">~</span> <span class="st">"data.table (compressed)"</span>,</span>
<span>    .default <span class="op">=</span> <span class="va">software</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`data size` <span class="op">=</span> <span class="va">data_size</span>, time <span class="op">=</span> <span class="va">time_elapsed</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>memory <span class="op">=</span> <span class="va">mem_max_after</span> <span class="op">-</span> <span class="va">mem_before</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>base <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">time</span>, <span class="fl">1</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">`data size`</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>speedup <span class="op">=</span> <span class="va">base</span> <span class="op">/</span> <span class="va">time</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">speedup</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">software</span>, <span class="va">time</span>, <span class="va">x</span>, <span class="va">speedup</span>, <span class="va">memory</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rawtime <span class="op">=</span> <span class="va">time</span>, time <span class="op">=</span> <span class="fu">prettyunits</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/prettyunits/man/pretty_sec.html" class="external-link">pretty_sec</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`speedup from CSV` <span class="op">=</span> <span class="va">speedup</span><span class="op">)</span></span>
<span></span>
<span><span class="va">csv_tab_read</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Parquet vs CSV, reading"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html" class="external-link">tab_options</a></span><span class="op">(</span>table.align <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**small data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"small"</span>, <span class="st">"s"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**medium data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"medium"</span>, <span class="st">"m"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**large data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"large"</span>, <span class="st">"l"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/row_group_order.html" class="external-link">row_group_order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="st">"m"</span>, <span class="st">"l"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html" class="external-link">cols_hide</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">rawtime</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_align.html" class="external-link">cols_align</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">time</span>, align <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_bytes.html" class="external-link">fmt_bytes</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">memory</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_plt_bar.html" class="external-link">gt_plt_bar</a></span><span class="op">(</span>column <span class="op">=</span> <span class="va">`speedup from CSV`</span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div id="fskpkgznme" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#fskpkgznme table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#fskpkgznme thead, #fskpkgznme tbody, #fskpkgznme tfoot, #fskpkgznme tr, #fskpkgznme td, #fskpkgznme th {
  border-style: none;
}

#fskpkgznme p {
  margin: 0;
  padding: 0;
}

#fskpkgznme .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#fskpkgznme .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#fskpkgznme .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#fskpkgznme .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#fskpkgznme .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fskpkgznme .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fskpkgznme .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#fskpkgznme .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#fskpkgznme .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#fskpkgznme .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#fskpkgznme .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#fskpkgznme .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#fskpkgznme .gt_spanner_row {
  border-bottom-style: hidden;
}

#fskpkgznme .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#fskpkgznme .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#fskpkgznme .gt_from_md > :first-child {
  margin-top: 0;
}

#fskpkgznme .gt_from_md > :last-child {
  margin-bottom: 0;
}

#fskpkgznme .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#fskpkgznme .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#fskpkgznme .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#fskpkgznme .gt_row_group_first td {
  border-top-width: 2px;
}

#fskpkgznme .gt_row_group_first th {
  border-top-width: 2px;
}

#fskpkgznme .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fskpkgznme .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#fskpkgznme .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#fskpkgznme .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fskpkgznme .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#fskpkgznme .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#fskpkgznme .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#fskpkgznme .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#fskpkgznme .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#fskpkgznme .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fskpkgznme .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fskpkgznme .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#fskpkgznme .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#fskpkgznme .gt_left {
  text-align: left;
}

#fskpkgznme .gt_center {
  text-align: center;
}

#fskpkgznme .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#fskpkgznme .gt_font_normal {
  font-weight: normal;
}

#fskpkgznme .gt_font_bold {
  font-weight: bold;
}

#fskpkgznme .gt_font_italic {
  font-style: italic;
}

#fskpkgznme .gt_super {
  font-size: 65%;
}

#fskpkgznme .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#fskpkgznme .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#fskpkgznme .gt_indent_1 {
  text-indent: 5px;
}

#fskpkgznme .gt_indent_2 {
  text-indent: 10px;
}

#fskpkgznme .gt_indent_3 {
  text-indent: 15px;
}

#fskpkgznme .gt_indent_4 {
  text-indent: 20px;
}

#fskpkgznme .gt_indent_5 {
  text-indent: 25px;
}

#fskpkgznme .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#fskpkgznme div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Parquet vs CSV, reading</th>
</tr>
<tr class="gt_col_headings even">
<th id="software" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">software</th>
<th id="time" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">time</th>
<th id="x" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">x</th>
<th id="speedup-from-CSV" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">speedup from CSV</th>
<th id="memory" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">memory</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="5" id="&lt;span data-qmd-base64=&quot;KipzbWFsbCBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;small data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>small data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="s  software">nanoparquet</td>
<td class="gt_row gt_right" headers="s  time">32ms</td>
<td class="gt_row gt_right" headers="s  x">13.1</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="59.18" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">69.8 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="s  software">data.table</td>
<td class="gt_row gt_right" headers="s  time">61ms</td>
<td class="gt_row gt_right" headers="s  x">6.7</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="30.58" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">68.1 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="s  software">data.table (compressed)</td>
<td class="gt_row gt_right" headers="s  time">146ms</td>
<td class="gt_row gt_right" headers="s  x">2.8</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="12.57" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">113.3 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="s  software">readr</td>
<td class="gt_row gt_right" headers="s  time">405ms</td>
<td class="gt_row gt_right" headers="s  x">1.0</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="4.53" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">189.6 MB</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="5" id="&lt;span data-qmd-base64=&quot;KiptZWRpdW0gZGF0YSoq&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;medium data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>medium data</strong></td>
</tr>
<tr class="gt_row_group_first odd">
<td class="gt_row gt_left" headers="m  software">nanoparquet</td>
<td class="gt_row gt_right" headers="m  time">1s</td>
<td class="gt_row gt_right" headers="m  x">5.2</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="23.57" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">1.5 GB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="m  software">data.table</td>
<td class="gt_row gt_right" headers="m  time">874ms</td>
<td class="gt_row gt_right" headers="m  x">6.0</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="27.02" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">1.3 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="m  software">data.table (compressed)</td>
<td class="gt_row gt_right" headers="m  time">2s</td>
<td class="gt_row gt_right" headers="m  x">2.6</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="11.89" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">1.4 GB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="m  software">readr</td>
<td class="gt_row gt_right" headers="m  time">5.2s</td>
<td class="gt_row gt_right" headers="m  x">1.0</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="4.53" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">2.6 GB</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="5" id="&lt;span data-qmd-base64=&quot;KipsYXJnZSBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;large data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>large data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="l  software">nanoparquet</td>
<td class="gt_row gt_right" headers="l  time">10.8s</td>
<td class="gt_row gt_right" headers="l  x">21.7</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="98.37" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">7.6 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="l  software">data.table</td>
<td class="gt_row gt_right" headers="l  time">12.5s</td>
<td class="gt_row gt_right" headers="l  x">18.7</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="84.77" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">8.9 GB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="l  software">data.table (compressed)</td>
<td class="gt_row gt_right" headers="l  time">27.1s</td>
<td class="gt_row gt_right" headers="l  x">8.6</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="39.16" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">7.4 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="l  software">readr</td>
<td class="gt_row gt_right" headers="l  time">3m 54.4s</td>
<td class="gt_row gt_right" headers="l  x">1.0</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="4.53" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">8 GB</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notes:</p>
<ul>
<li>The single-threaded nanoparquet Parquet-reader is competitive. It can read a compressed Parquet file just as fast as the state of the art uncompressed CSV reader that uses at least 2 threads.</li>
</ul>
<p>The nanoparquet vs CSV results when writing Parquet or CSV files:</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">csv_tab_write</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">software</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nanoparquet"</span>, <span class="st">"data.table"</span>, <span class="st">"data.table.gz"</span>, <span class="st">"readr"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">direction</span> <span class="op">==</span> <span class="st">"write"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>software <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">software</span> <span class="op">==</span>  <span class="st">"data.table.gz"</span> <span class="op">~</span> <span class="st">"data.table (compressed)"</span>,</span>
<span>    .default <span class="op">=</span> <span class="va">software</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`data size` <span class="op">=</span> <span class="va">data_size</span>, time <span class="op">=</span> <span class="va">time_elapsed</span>, `file size` <span class="op">=</span> <span class="va">file_size</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>memory <span class="op">=</span> <span class="va">mem_max_after</span> <span class="op">-</span> <span class="va">mem_before</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>base <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">time</span>, <span class="fl">1</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">`data size`</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>speedup <span class="op">=</span> <span class="va">base</span> <span class="op">/</span> <span class="va">time</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">speedup</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">software</span>, <span class="va">time</span>, <span class="va">x</span>, <span class="va">speedup</span>, <span class="va">memory</span>, <span class="va">`file size`</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rawtime <span class="op">=</span> <span class="va">time</span>, time <span class="op">=</span> <span class="fu">prettyunits</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/prettyunits/man/pretty_sec.html" class="external-link">pretty_sec</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`speedup from CSV` <span class="op">=</span> <span class="va">speedup</span><span class="op">)</span></span>
<span></span>
<span><span class="va">csv_tab_write</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Parquet vs CSV, writing"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html" class="external-link">tab_options</a></span><span class="op">(</span>table.align <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**small data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"small"</span>, <span class="st">"s"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**medium data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"medium"</span>, <span class="st">"m"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**large data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"large"</span>, <span class="st">"l"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/row_group_order.html" class="external-link">row_group_order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="st">"m"</span>, <span class="st">"l"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html" class="external-link">cols_hide</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">rawtime</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_align.html" class="external-link">cols_align</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">time</span>, align <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_bytes.html" class="external-link">fmt_bytes</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">memory</span>, <span class="va">`file size`</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_plt_bar.html" class="external-link">gt_plt_bar</a></span><span class="op">(</span>column <span class="op">=</span> <span class="va">`speedup from CSV`</span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div id="sfhdxxjthe" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#sfhdxxjthe table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#sfhdxxjthe thead, #sfhdxxjthe tbody, #sfhdxxjthe tfoot, #sfhdxxjthe tr, #sfhdxxjthe td, #sfhdxxjthe th {
  border-style: none;
}

#sfhdxxjthe p {
  margin: 0;
  padding: 0;
}

#sfhdxxjthe .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#sfhdxxjthe .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#sfhdxxjthe .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#sfhdxxjthe .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#sfhdxxjthe .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sfhdxxjthe .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sfhdxxjthe .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sfhdxxjthe .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#sfhdxxjthe .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#sfhdxxjthe .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#sfhdxxjthe .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#sfhdxxjthe .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#sfhdxxjthe .gt_spanner_row {
  border-bottom-style: hidden;
}

#sfhdxxjthe .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#sfhdxxjthe .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#sfhdxxjthe .gt_from_md > :first-child {
  margin-top: 0;
}

#sfhdxxjthe .gt_from_md > :last-child {
  margin-bottom: 0;
}

#sfhdxxjthe .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#sfhdxxjthe .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#sfhdxxjthe .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#sfhdxxjthe .gt_row_group_first td {
  border-top-width: 2px;
}

#sfhdxxjthe .gt_row_group_first th {
  border-top-width: 2px;
}

#sfhdxxjthe .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sfhdxxjthe .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#sfhdxxjthe .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#sfhdxxjthe .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sfhdxxjthe .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sfhdxxjthe .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#sfhdxxjthe .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#sfhdxxjthe .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#sfhdxxjthe .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#sfhdxxjthe .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sfhdxxjthe .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#sfhdxxjthe .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sfhdxxjthe .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#sfhdxxjthe .gt_left {
  text-align: left;
}

#sfhdxxjthe .gt_center {
  text-align: center;
}

#sfhdxxjthe .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#sfhdxxjthe .gt_font_normal {
  font-weight: normal;
}

#sfhdxxjthe .gt_font_bold {
  font-weight: bold;
}

#sfhdxxjthe .gt_font_italic {
  font-style: italic;
}

#sfhdxxjthe .gt_super {
  font-size: 65%;
}

#sfhdxxjthe .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#sfhdxxjthe .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#sfhdxxjthe .gt_indent_1 {
  text-indent: 5px;
}

#sfhdxxjthe .gt_indent_2 {
  text-indent: 10px;
}

#sfhdxxjthe .gt_indent_3 {
  text-indent: 15px;
}

#sfhdxxjthe .gt_indent_4 {
  text-indent: 20px;
}

#sfhdxxjthe .gt_indent_5 {
  text-indent: 25px;
}

#sfhdxxjthe .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#sfhdxxjthe div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table caption-top" style="width:100%;" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="6" class="gt_heading gt_title gt_font_normal gt_bottom_border">Parquet vs CSV, writing</th>
</tr>
<tr class="gt_col_headings even">
<th id="software" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">software</th>
<th id="time" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">time</th>
<th id="x" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">x</th>
<th id="speedup-from-CSV" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">speedup from CSV</th>
<th id="memory" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">memory</th>
<th id="file-size" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">file size</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="6" id="&lt;span data-qmd-base64=&quot;KipzbWFsbCBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;small data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>small data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="s  software">nanoparquet</td>
<td class="gt_row gt_right" headers="s  time">135ms</td>
<td class="gt_row gt_right" headers="s  x">5.6</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="30.54" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">83 MB</td>
<td class="gt_row gt_right" headers="s  file size">5.7 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="s  software">data.table</td>
<td class="gt_row gt_right" headers="s  time">61ms</td>
<td class="gt_row gt_right" headers="s  x">12.3</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="67.10" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">868.4 kB</td>
<td class="gt_row gt_right" headers="s  file size">31 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="s  software">data.table (compressed)</td>
<td class="gt_row gt_right" headers="s  time">397ms</td>
<td class="gt_row gt_right" headers="s  x">1.9</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="10.31" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">1.7 MB</td>
<td class="gt_row gt_right" headers="s  file size">8.3 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="s  software">readr</td>
<td class="gt_row gt_right" headers="s  time">748ms</td>
<td class="gt_row gt_right" headers="s  x">1.0</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="5.47" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">52.6 MB</td>
<td class="gt_row gt_right" headers="s  file size">31.1 MB</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="6" id="&lt;span data-qmd-base64=&quot;KiptZWRpdW0gZGF0YSoq&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;medium data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>medium data</strong></td>
</tr>
<tr class="gt_row_group_first odd">
<td class="gt_row gt_left" headers="m  software">nanoparquet</td>
<td class="gt_row gt_right" headers="m  time">2.4s</td>
<td class="gt_row gt_right" headers="m  x">5.5</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="30.33" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">678.4 MB</td>
<td class="gt_row gt_right" headers="m  file size">111.4 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="m  software">data.table</td>
<td class="gt_row gt_right" headers="m  time">750ms</td>
<td class="gt_row gt_right" headers="m  x">18.0</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="98.37" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">2.6 MB</td>
<td class="gt_row gt_right" headers="m  file size">619.2 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="m  software">data.table (compressed)</td>
<td class="gt_row gt_right" headers="m  time">7.2s</td>
<td class="gt_row gt_right" headers="m  x">1.9</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="10.25" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">5.6 MB</td>
<td class="gt_row gt_right" headers="m  file size">165.2 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="m  software">readr</td>
<td class="gt_row gt_right" headers="m  time">13.5s</td>
<td class="gt_row gt_right" headers="m  x">1.0</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="5.47" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">841.9 MB</td>
<td class="gt_row gt_right" headers="m  file size">621.1 MB</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="6" id="&lt;span data-qmd-base64=&quot;KipsYXJnZSBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;large data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>large data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="l  software">nanoparquet</td>
<td class="gt_row gt_right" headers="l  time">26.7s</td>
<td class="gt_row gt_right" headers="l  x">5.3</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="28.79" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">402.7 MB</td>
<td class="gt_row gt_right" headers="l  file size">1.1 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="l  software">data.table</td>
<td class="gt_row gt_right" headers="l  time">7.9s</td>
<td class="gt_row gt_right" headers="l  x">17.9</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="97.81" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">269.3 MB</td>
<td class="gt_row gt_right" headers="l  file size">6.2 GB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="l  software">data.table (compressed)</td>
<td class="gt_row gt_right" headers="l  time">1m 11.7s</td>
<td class="gt_row gt_right" headers="l  x">2.0</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="10.72" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">269.3 MB</td>
<td class="gt_row gt_right" headers="l  file size">1.7 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="l  software">readr</td>
<td class="gt_row gt_right" headers="l  time">2m 20.6s</td>
<td class="gt_row gt_right" headers="l  x">1.0</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="5.47" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">1 GB</td>
<td class="gt_row gt_right" headers="l  file size">6.2 GB</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notes:</p>
<ul>
<li>The data.table CSV writer is about 3 times as fast as the nanoparquet Parquet writer, if the CSV file is uncompressed. The CSV writer uses at least 4 threads, the Parquet write is single-threaded.</li>
<li>The nanoparquet Parquet writer is 2-5 times faster than the data.table CSV writer if the CSV file is compressed.</li>
<li>The Parquet files are about 5-6 times smaller than the uncompressed CSV files and about 30-35% smaller than the compressed CSV files.</li>
</ul></section><section class="level2"><h2 id="parquet-implementations-1">Parquet implementations<a class="anchor" aria-label="anchor" href="#parquet-implementations-1"></a>
</h2>
<p>This is the summary of the Parquet readers, for the same three files.</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pq_tab_read</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">software</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nanoparquet"</span>, <span class="st">"arrow"</span>, <span class="st">"duckdb"</span>, <span class="st">"readr"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">direction</span> <span class="op">==</span> <span class="st">"read"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`data size` <span class="op">=</span> <span class="va">data_size</span>, time <span class="op">=</span> <span class="va">time_elapsed</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>memory <span class="op">=</span> <span class="va">mem_max_after</span> <span class="op">-</span> <span class="va">mem_before</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>base <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">time</span>, <span class="fl">1</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">`data size`</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>speedup <span class="op">=</span> <span class="va">base</span> <span class="op">/</span> <span class="va">time</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">speedup</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">software</span>, <span class="va">time</span>, <span class="va">x</span>, <span class="va">speedup</span>, <span class="va">memory</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rawtime <span class="op">=</span> <span class="va">time</span>, time <span class="op">=</span> <span class="fu">prettyunits</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/prettyunits/man/pretty_sec.html" class="external-link">pretty_sec</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">software</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nanoparquet"</span>, <span class="st">"arrow"</span>, <span class="st">"duckdb"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>software <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">software</span> <span class="op">==</span>  <span class="st">"arrow"</span> <span class="op">~</span> <span class="st">"Arrow"</span>,</span>
<span>    <span class="va">software</span> <span class="op">==</span> <span class="st">"duckdb"</span> <span class="op">~</span> <span class="st">"DuckDB"</span>,</span>
<span>    .default <span class="op">=</span> <span class="va">software</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`speedup from CSV` <span class="op">=</span> <span class="va">speedup</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pq_tab_read</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Parquet implementations, reading"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html" class="external-link">tab_options</a></span><span class="op">(</span>table.align <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**small data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"small"</span>, <span class="st">"s"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**medium data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"medium"</span>, <span class="st">"m"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**large data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"large"</span>, <span class="st">"l"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/row_group_order.html" class="external-link">row_group_order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="st">"m"</span>, <span class="st">"l"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html" class="external-link">cols_hide</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">rawtime</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_align.html" class="external-link">cols_align</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">time</span>, align <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_bytes.html" class="external-link">fmt_bytes</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">memory</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_plt_bar.html" class="external-link">gt_plt_bar</a></span><span class="op">(</span>column <span class="op">=</span> <span class="va">`speedup from CSV`</span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div id="bflncqikwz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bflncqikwz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bflncqikwz thead, #bflncqikwz tbody, #bflncqikwz tfoot, #bflncqikwz tr, #bflncqikwz td, #bflncqikwz th {
  border-style: none;
}

#bflncqikwz p {
  margin: 0;
  padding: 0;
}

#bflncqikwz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bflncqikwz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bflncqikwz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bflncqikwz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bflncqikwz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bflncqikwz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bflncqikwz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bflncqikwz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bflncqikwz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bflncqikwz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bflncqikwz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bflncqikwz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bflncqikwz .gt_spanner_row {
  border-bottom-style: hidden;
}

#bflncqikwz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bflncqikwz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bflncqikwz .gt_from_md > :first-child {
  margin-top: 0;
}

#bflncqikwz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bflncqikwz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bflncqikwz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bflncqikwz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bflncqikwz .gt_row_group_first td {
  border-top-width: 2px;
}

#bflncqikwz .gt_row_group_first th {
  border-top-width: 2px;
}

#bflncqikwz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bflncqikwz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bflncqikwz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bflncqikwz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bflncqikwz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bflncqikwz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bflncqikwz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bflncqikwz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bflncqikwz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bflncqikwz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bflncqikwz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bflncqikwz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bflncqikwz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bflncqikwz .gt_left {
  text-align: left;
}

#bflncqikwz .gt_center {
  text-align: center;
}

#bflncqikwz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bflncqikwz .gt_font_normal {
  font-weight: normal;
}

#bflncqikwz .gt_font_bold {
  font-weight: bold;
}

#bflncqikwz .gt_font_italic {
  font-style: italic;
}

#bflncqikwz .gt_super {
  font-size: 65%;
}

#bflncqikwz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bflncqikwz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bflncqikwz .gt_indent_1 {
  text-indent: 5px;
}

#bflncqikwz .gt_indent_2 {
  text-indent: 10px;
}

#bflncqikwz .gt_indent_3 {
  text-indent: 15px;
}

#bflncqikwz .gt_indent_4 {
  text-indent: 20px;
}

#bflncqikwz .gt_indent_5 {
  text-indent: 25px;
}

#bflncqikwz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#bflncqikwz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Parquet implementations, reading</th>
</tr>
<tr class="gt_col_headings even">
<th id="software" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">software</th>
<th id="time" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">time</th>
<th id="x" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">x</th>
<th id="speedup-from-CSV" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">speedup from CSV</th>
<th id="memory" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">memory</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="5" id="&lt;span data-qmd-base64=&quot;KipzbWFsbCBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;small data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>small data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="s  software">nanoparquet</td>
<td class="gt_row gt_right" headers="s  time">32ms</td>
<td class="gt_row gt_right" headers="s  x">13.1</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="59.18" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">69.8 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="s  software">Arrow</td>
<td class="gt_row gt_right" headers="s  time">42ms</td>
<td class="gt_row gt_right" headers="s  x">9.9</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="44.75" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">110.6 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="s  software">DuckDB</td>
<td class="gt_row gt_right" headers="s  time">74ms</td>
<td class="gt_row gt_right" headers="s  x">5.5</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="25.13" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">114.4 MB</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="5" id="&lt;span data-qmd-base64=&quot;KiptZWRpdW0gZGF0YSoq&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;medium data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>medium data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="m  software">nanoparquet</td>
<td class="gt_row gt_right" headers="m  time">1s</td>
<td class="gt_row gt_right" headers="m  x">5.2</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="23.57" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">1.5 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="m  software">Arrow</td>
<td class="gt_row gt_right" headers="m  time">918ms</td>
<td class="gt_row gt_right" headers="m  x">5.7</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="25.76" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">2.1 GB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="m  software">DuckDB</td>
<td class="gt_row gt_right" headers="m  time">1.2s</td>
<td class="gt_row gt_right" headers="m  x">4.5</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="20.34" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">2 GB</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="5" id="&lt;span data-qmd-base64=&quot;KipsYXJnZSBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;large data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>large data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="l  software">nanoparquet</td>
<td class="gt_row gt_right" headers="l  time">10.8s</td>
<td class="gt_row gt_right" headers="l  x">21.7</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="98.37" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">7.6 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="l  software">Arrow</td>
<td class="gt_row gt_right" headers="l  time">12.3s</td>
<td class="gt_row gt_right" headers="l  x">19.1</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="86.42" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">8.8 GB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="l  software">DuckDB</td>
<td class="gt_row gt_right" headers="l  time">14.3s</td>
<td class="gt_row gt_right" headers="l  x">16.4</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="74.40" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">8.6 GB</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notes:</p>
<ul>
<li>In general, all three implementations perform similarly. nanoparquet is very competitive for these three data sets in terms of speed and also tends to use the least amount of memory.</li>
<li>I turned off ALTREP in arrow, so that it reads the data into memory.</li>
</ul>
<p>The summary for the Parquet writers:</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pq_tab_write</span> <span class="op">&lt;-</span> <span class="va">results</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">software</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nanoparquet"</span>, <span class="st">"arrow"</span>, <span class="st">"duckdb"</span>, <span class="st">"readr"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">direction</span> <span class="op">==</span> <span class="st">"write"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`data size` <span class="op">=</span> <span class="va">data_size</span>, time <span class="op">=</span> <span class="va">time_elapsed</span>, `file size` <span class="op">=</span> <span class="va">file_size</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>memory <span class="op">=</span> <span class="va">mem_max_after</span> <span class="op">-</span> <span class="va">mem_before</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>base <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">time</span>, <span class="fl">1</span><span class="op">)</span>, .by <span class="op">=</span> <span class="va">`data size`</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>speedup <span class="op">=</span> <span class="va">base</span> <span class="op">/</span> <span class="va">time</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">speedup</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">software</span>, <span class="va">time</span>, <span class="va">x</span>, <span class="va">speedup</span>, <span class="va">memory</span>, <span class="va">`file size`</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rawtime <span class="op">=</span> <span class="va">time</span>, time <span class="op">=</span> <span class="fu">prettyunits</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/prettyunits/man/pretty_sec.html" class="external-link">pretty_sec</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">software</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nanoparquet"</span>, <span class="st">"arrow"</span>, <span class="st">"duckdb"</span>, <span class="st">"readr"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>software <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">software</span> <span class="op">==</span>  <span class="st">"arrow"</span> <span class="op">~</span> <span class="st">"Arrow"</span>,</span>
<span>    <span class="va">software</span> <span class="op">==</span> <span class="st">"duckdb"</span> <span class="op">~</span> <span class="st">"DuckDB"</span>,</span>
<span>    .default <span class="op">=</span> <span class="va">software</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`speedup from CSV` <span class="op">=</span> <span class="va">speedup</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pq_tab_write</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html" class="external-link">gt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html" class="external-link">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Parquet implementations, writing"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html" class="external-link">tab_options</a></span><span class="op">(</span>table.align <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**small data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"small"</span>, <span class="st">"s"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**medium data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"medium"</span>, <span class="st">"m"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_row_group.html" class="external-link">tab_row_group</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html" class="external-link">md</a></span><span class="op">(</span><span class="st">"**large data**"</span><span class="op">)</span>, rows <span class="op">=</span> <span class="va">`data size`</span> <span class="op">==</span> <span class="st">"large"</span>, <span class="st">"l"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/row_group_order.html" class="external-link">row_group_order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="st">"m"</span>, <span class="st">"l"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html" class="external-link">cols_hide</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">`data size`</span>, <span class="va">rawtime</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_align.html" class="external-link">cols_align</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">time</span>, align <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_bytes.html" class="external-link">fmt_bytes</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">memory</span>, <span class="va">`file size`</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_plt_bar.html" class="external-link">gt_plt_bar</a></span><span class="op">(</span>column <span class="op">=</span> <span class="va">`speedup from CSV`</span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output-display">
<div id="rbisrpduyw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rbisrpduyw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rbisrpduyw thead, #rbisrpduyw tbody, #rbisrpduyw tfoot, #rbisrpduyw tr, #rbisrpduyw td, #rbisrpduyw th {
  border-style: none;
}

#rbisrpduyw p {
  margin: 0;
  padding: 0;
}

#rbisrpduyw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: 0;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rbisrpduyw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rbisrpduyw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rbisrpduyw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rbisrpduyw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rbisrpduyw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbisrpduyw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rbisrpduyw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rbisrpduyw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rbisrpduyw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rbisrpduyw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rbisrpduyw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rbisrpduyw .gt_spanner_row {
  border-bottom-style: hidden;
}

#rbisrpduyw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rbisrpduyw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rbisrpduyw .gt_from_md > :first-child {
  margin-top: 0;
}

#rbisrpduyw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rbisrpduyw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rbisrpduyw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rbisrpduyw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rbisrpduyw .gt_row_group_first td {
  border-top-width: 2px;
}

#rbisrpduyw .gt_row_group_first th {
  border-top-width: 2px;
}

#rbisrpduyw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbisrpduyw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rbisrpduyw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rbisrpduyw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbisrpduyw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbisrpduyw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rbisrpduyw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rbisrpduyw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rbisrpduyw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rbisrpduyw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rbisrpduyw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbisrpduyw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rbisrpduyw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rbisrpduyw .gt_left {
  text-align: left;
}

#rbisrpduyw .gt_center {
  text-align: center;
}

#rbisrpduyw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rbisrpduyw .gt_font_normal {
  font-weight: normal;
}

#rbisrpduyw .gt_font_bold {
  font-weight: bold;
}

#rbisrpduyw .gt_font_italic {
  font-style: italic;
}

#rbisrpduyw .gt_super {
  font-size: 65%;
}

#rbisrpduyw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rbisrpduyw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rbisrpduyw .gt_indent_1 {
  text-indent: 5px;
}

#rbisrpduyw .gt_indent_2 {
  text-indent: 10px;
}

#rbisrpduyw .gt_indent_3 {
  text-indent: 15px;
}

#rbisrpduyw .gt_indent_4 {
  text-indent: 20px;
}

#rbisrpduyw .gt_indent_5 {
  text-indent: 25px;
}

#rbisrpduyw .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rbisrpduyw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>
<table class="table gt_table caption-top" style="width:100%;" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="gt_heading header">
<th colspan="6" class="gt_heading gt_title gt_font_normal gt_bottom_border">Parquet implementations, writing</th>
</tr>
<tr class="gt_col_headings even">
<th id="software" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">software</th>
<th id="time" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">time</th>
<th id="x" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">x</th>
<th id="speedup-from-CSV" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">speedup from CSV</th>
<th id="memory" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">memory</th>
<th id="file-size" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">file size</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="6" id="&lt;span data-qmd-base64=&quot;KipzbWFsbCBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;small data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>small data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="s  software">nanoparquet</td>
<td class="gt_row gt_right" headers="s  time">135ms</td>
<td class="gt_row gt_right" headers="s  x">5.6</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="98.37" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">83 MB</td>
<td class="gt_row gt_right" headers="s  file size">5.7 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="s  software">Arrow</td>
<td class="gt_row gt_right" headers="s  time">144ms</td>
<td class="gt_row gt_right" headers="s  x">5.2</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="92.18" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">35.8 MB</td>
<td class="gt_row gt_right" headers="s  file size">5.7 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="s  software">DuckDB</td>
<td class="gt_row gt_right" headers="s  time">214ms</td>
<td class="gt_row gt_right" headers="s  x">3.5</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="61.60" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">159.8 MB</td>
<td class="gt_row gt_right" headers="s  file size">9.7 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="s  software">readr</td>
<td class="gt_row gt_right" headers="s  time">748ms</td>
<td class="gt_row gt_right" headers="s  x">1.0</td>
<td class="gt_row gt_left" headers="s  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="17.62" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="s  memory">52.6 MB</td>
<td class="gt_row gt_right" headers="s  file size">31.1 MB</td>
</tr>
<tr class="gt_group_heading_row even">
<td colspan="6" id="&lt;span data-qmd-base64=&quot;KiptZWRpdW0gZGF0YSoq&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;medium data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>medium data</strong></td>
</tr>
<tr class="gt_row_group_first odd">
<td class="gt_row gt_left" headers="m  software">nanoparquet</td>
<td class="gt_row gt_right" headers="m  time">2.4s</td>
<td class="gt_row gt_right" headers="m  x">5.5</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="97.70" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">678.4 MB</td>
<td class="gt_row gt_right" headers="m  file size">111.4 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="m  software">Arrow</td>
<td class="gt_row gt_right" headers="m  time">2.7s</td>
<td class="gt_row gt_right" headers="m  x">5.1</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="89.05" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">291.7 MB</td>
<td class="gt_row gt_right" headers="m  file size">112.1 MB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="m  software">DuckDB</td>
<td class="gt_row gt_right" headers="m  time">2.7s</td>
<td class="gt_row gt_right" headers="m  x">5.0</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="88.95" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">1.9 GB</td>
<td class="gt_row gt_right" headers="m  file size">193.6 MB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="m  software">readr</td>
<td class="gt_row gt_right" headers="m  time">13.5s</td>
<td class="gt_row gt_right" headers="m  x">1.0</td>
<td class="gt_row gt_left" headers="m  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="17.62" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="m  memory">841.9 MB</td>
<td class="gt_row gt_right" headers="m  file size">621.1 MB</td>
</tr>
<tr class="gt_group_heading_row odd">
<td colspan="6" id="&lt;span data-qmd-base64=&quot;KipsYXJnZSBkYXRhKio=&quot;&gt;&lt;span class='gt_from_md'&gt;&lt;strong&gt;large data&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup"><strong>large data</strong></td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_left" headers="l  software">nanoparquet</td>
<td class="gt_row gt_right" headers="l  time">26.7s</td>
<td class="gt_row gt_right" headers="l  x">5.3</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="92.73" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">402.7 MB</td>
<td class="gt_row gt_right" headers="l  file size">1.1 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="l  software">Arrow</td>
<td class="gt_row gt_right" headers="l  time">29.3s</td>
<td class="gt_row gt_right" headers="l  x">4.8</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="84.67" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">591 MB</td>
<td class="gt_row gt_right" headers="l  file size">1.1 GB</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="l  software">DuckDB</td>
<td class="gt_row gt_right" headers="l  time">34s</td>
<td class="gt_row gt_right" headers="l  x">4.1</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="72.90" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">621.7 MB</td>
<td class="gt_row gt_right" headers="l  file size">1.9 GB</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="l  software">readr</td>
<td class="gt_row gt_right" headers="l  time">2m 20.6s</td>
<td class="gt_row gt_right" headers="l  x">1.0</td>
<td class="gt_row gt_left" headers="l  speedup from CSV"><svg xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" width="113.39pt" height="14.17pt" viewbox="0 0 113.39 14.17"><g class="svglite"><defs><style type="text/css">    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {      fill: none;      stroke: #000000;      stroke-linecap: round;      stroke-linejoin: round;      stroke-miterlimit: 10.00;    }    .svglite text {      white-space: pre;    }    .svglite g.glyphgroup path {      fill: inherit;      stroke: none;    }  </style></defs><rect width="100%" height="100%" style="stroke: none; fill: none;"></rect><defs><clippath id="cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw=="><rect x="0.00" y="0.00" width="113.39" height="14.17"></rect></clippath></defs><g clip-path="url(#cpMC4wMHwxMTMuMzl8MC4wMHwxNC4xNw==)"><rect x="5.02" y="0.89" width="17.62" height="12.40" style="stroke-width: 1.07; stroke: none; stroke-linecap: butt; stroke-linejoin: miter; fill: #A020F0;"></rect><line x1="5.02" y1="14.17" x2="5.02" y2="0.0000000000000018" style="stroke-width: 1.07; stroke-linecap: butt;"></line></g></g></svg></td>
<td class="gt_row gt_right" headers="l  memory">1 GB</td>
<td class="gt_row gt_right" headers="l  file size">6.2 GB</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Notes:</p>
<ul>
<li>nanoparquet is again very competitive in terms of speed, it is slightly faster than the other two implementations, for these data sets.</li>
<li>DuckDB seems to waste space when writing out Parquet files. This could be possibly fine tuned by forcing a different encoding. This behavior has improved somewhat with the 1.2.0 release (<a href="https://github.com/duckdb/duckdb/issues/3316" class="external-link uri">https://github.com/duckdb/duckdb/issues/3316</a>).</li>
</ul>
<!-- ## ALTREP vs subsets --></section><section class="level2"><h2 id="conclusions">Conclusions<a class="anchor" aria-label="anchor" href="#conclusions"></a>
</h2>
<p>These results will probably change for a different data sets, or on a different system. In particular, Arrow and DuckDB are probably faster on larger systems, where the data is stored on multiple physical disks.</p>
<p>Both Arrow and DuckDB let you run queries on the data without loading it all into memory first. This is especially important if the data does not fit into memory at all, not even the columns needed for the analysis. nanoparquet cannot do this.</p>
<p>However, in general, based on these benchmarks I have good reasons to trust that the nanoparquet Parquet reader and writer is competitive with the other implementations available from R, both in terms of speed and memory use.</p>
<p>If the limitations of nanoparquet are not prohibitive for your use case, it is a good choice for Parquet I/O.</p>
</section><section class="level2"><h2 id="raw-benchmark-results">Raw benchmark results<a class="anchor" aria-label="anchor" href="#raw-benchmark-results"></a>
</h2>
<p>These are the raw results. You can scroll to the right if your screen is not wide enough for the whole table.</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pillar.r-lib.org/" class="external-link">pillar</a></span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code><span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; Attaching package: 'pillar'</span></span></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code><span><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;     dim_desc</span></span></code></pre>
</div>
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span>, n <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code><span><span class="co">#&gt; # A data frame: 36 × 10</span></span>
<span><span class="co">#&gt;    software      direction data_size time_user time_system time_elapsed mem_before mem_max_before mem_max_after  file_size</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;     &lt;chr&gt;         &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 nanoparquet   read      small        0.0230     0.008         0.0310  161087488      161349632     230916096         NA</span></span>
<span><span class="co">#&gt;  2 nanoparquet   write     small        0.112      0.021         0.134   307871744      307970048     390856704    5687765</span></span>
<span><span class="co">#&gt;  3 arrow         read      small        0.059      0.024         0.0410  163184640      163446784     273825792         NA</span></span>
<span><span class="co">#&gt;  4 arrow         write     small        0.143      0.007         0.143   299401216      299679744     335200256    5690457</span></span>
<span><span class="co">#&gt;  5 duckdb        read      small        0.094      0.018         0.0730  163135488      163397632     277512192         NA</span></span>
<span><span class="co">#&gt;  6 duckdb        write     small        0.414      0.028         0.214   305135616      305152000     464896000    9723773</span></span>
<span><span class="co">#&gt;  7 data.table    read      small        0.141      0.012         0.0600  159612928      159875072     227721216         NA</span></span>
<span><span class="co">#&gt;  8 data.table    write     small        0.155      0.00900       0.0610  309542912      309821440     310411264   30960660</span></span>
<span><span class="co">#&gt;  9 data.table.gz read      small        0.212      0.026         0.146   159858688      160104448     273154048         NA</span></span>
<span><span class="co">#&gt; 10 data.table.gz write     small        1.50       0.017         0.397   298385408      298663936     300105728    8262799</span></span>
<span><span class="co">#&gt; 11 readr         read      small        1.05       0.158         0.405   160514048      160776192     350158848         NA</span></span>
<span><span class="co">#&gt; 12 readr         write     small        1.69       1.75          0.748   305709056      305987584     358268928   31053850</span></span>
<span><span class="co">#&gt; 13 nanoparquet   read      medium       0.864      0.139         1.00    154484736      154746880    1635860480         NA</span></span>
<span><span class="co">#&gt; 14 nanoparquet   write     medium       2.15       0.265         2.43   1089323008     1089601536    1767702528  111363391</span></span>
<span><span class="co">#&gt; 15 arrow         read      medium       1.30       0.232         0.917   154910720      154910720    2213920768         NA</span></span>
<span><span class="co">#&gt; 16 arrow         write     medium       2.70       0.078         2.66   1096105984     1096368128    1387806720  112105412</span></span>
<span><span class="co">#&gt; 17 duckdb        read      medium       2.12       0.301         1.16    164790272      165052416    2136080384         NA</span></span>
<span><span class="co">#&gt; 18 duckdb        write     medium       6.43       0.612         2.67   1084686336     1084964864    3032383488  193640563</span></span>
<span><span class="co">#&gt; 19 data.table    read      medium       2.33       0.135         0.874   158466048      158728192    1453555712         NA</span></span>
<span><span class="co">#&gt; 20 data.table    write     medium       2.62       0.103         0.749  1076707328     1076985856    1079279616  619210198</span></span>
<span><span class="co">#&gt; 21 data.table.gz read      medium       3.29       0.328         1.99    151683072      151945216    1515175936         NA</span></span>
<span><span class="co">#&gt; 22 data.table.gz write     medium      28.3        0.134         7.19   1103118336     1103396864    1108672512  165242566</span></span>
<span><span class="co">#&gt; 23 readr         read      medium      18.3        4.92          5.21    157696000      157958144    2803531776         NA</span></span>
<span><span class="co">#&gt; 24 readr         write     medium      31.8       29.4          13.5    1082851328     1083129856    1924775936  621073998</span></span>
<span><span class="co">#&gt; 25 nanoparquet   read      large        6.65       2.72         10.8     158351360      158613504    7776043008         NA</span></span>
<span><span class="co">#&gt; 26 nanoparquet   write     large       21.3        4.36         26.7    8389902336     8658927616    8792555520 1113819170</span></span>
<span><span class="co">#&gt; 27 arrow         read      large       12.2        8.07         12.3     151879680      152125440    8983003136         NA</span></span>
<span><span class="co">#&gt; 28 arrow         write     large       26.8        2.37         29.3    8385839104     8655028224    8976859136 1120869331</span></span>
<span><span class="co">#&gt; 29 duckdb        read      large       19.4        5.10         14.3     158613504      158875648    8774959104         NA</span></span>
<span><span class="co">#&gt; 30 duckdb        write     large       66.7       12.0          34.0    7279968256     7901659136    7901659136 1935744269</span></span>
<span><span class="co">#&gt; 31 data.table    read      large       21.5        3.80         12.5     152469504      152715264    9010954240         NA</span></span>
<span><span class="co">#&gt; 32 data.table    write     large       26.6        1.36          7.87   8382693376     8651997184    8651997184 6192100558</span></span>
<span><span class="co">#&gt; 33 data.table.gz read      large       31.1        7.04         27.1     160841728      161103872    7513079808         NA</span></span>
<span><span class="co">#&gt; 34 data.table.gz write     large      283.         1.25         71.7    8386412544     8655716352    8655716352 1652420625</span></span>
<span><span class="co">#&gt; 35 readr         read      large      148.       185.          234.      153108480      153370624    8192851968         NA</span></span>
<span><span class="co">#&gt; 36 readr         write     large      334.       387.          141.     8382644224     8651931648    9416835072 6210738558</span></span></code></pre>
</div>
</div>
<p>Notes:</p>
<ul>
<li>User time (<code>time_user</code>) plus system time (<code>time_system</code>) can be larger than the elapsed time (<code>time_elapsed</code>) for multithreaded implementations and it indeed is for all tools, except for nanoparquet, which is single-threaded.</li>
<li>All memory columns are in bytes. <code>mem_before</code> is the RSS size before reading/writing. <code>mem_max_before</code> is the maximum RSS size of the process until then. <code>mem_max_after</code> is the maximum RSS size of the process <em>after</em> the read/write operation.</li>
<li>So I can calculate (estimate) the memory usage of the tool by subtracting <code>mem_before</code> from <code>mem_max_after</code>. This could overestimate the memory usage if <code>mem_max_after</code> were the same as <code>mem_max_before</code>, but this never happens in practice.</li>
<li>When reading the file, <code>mem_max_after</code> includes the memory needed to store the data set itself. (See data sizes above.)</li>
<li>For arrow, I turned off ALTREP using <code>options(arrow.use_altrep = FALSE)</code>, see the <code>benchmarks-funcs.R</code> file. Otherwise arrow does not actually read all the data into memory.</li>
</ul></section><section class="level2"><h2 id="about">About<a class="anchor" aria-label="anchor" href="#about"></a>
</h2>
<p>See the <a href="https://github.com/r-lib/nanoparquet/blob/main/vignettes/articles/benchmarks-funcs.R" class="external-link"><code>benchmark-funcs.R</code></a> file in the nanoparquet repository for the code of the benchmarks.</p>
<p>I ran each measurement in its own subprocess, to make it easier to measure memory usage.</p>
<p>I did <em>not</em> include the package loading time in the benchmarks. nanoparquet has no dependencies and loads very quickly. Both the arrow and duckdb packages might take up to 200ms to load on the test system, because they need to load their dependencies and they are also bigger.</p>
<div class="cell">
<details class="code-fold"><summary>Show the code</summary><div class="sourceCode cell-code" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"sessioninfo.rds"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">si</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"sessioninfo.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="va">si</span> <span class="op">&lt;-</span> <span class="fu">sessioninfo</span><span class="fu">::</span><span class="fu"><a href="https://sessioninfo.r-lib.org/reference/session_info.html" class="external-link">session_info</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">si</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">me</span>, <span class="st">"sessioninfo.rds"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co"># load sessioninfo, for the print method</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/sessioninfo#readme" class="external-link">sessioninfo</a></span><span class="op">)</span></span>
<span><span class="va">si</span>  </span></code></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code><span><span class="co">#&gt; ─ Session info ───────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;  setting  value</span></span>
<span><span class="co">#&gt;  version  R version 4.5.0 (2025-04-11)</span></span>
<span><span class="co">#&gt;  os       macOS Sequoia 15.5</span></span>
<span><span class="co">#&gt;  system   aarch64, darwin20</span></span>
<span><span class="co">#&gt;  ui       X11</span></span>
<span><span class="co">#&gt;  language (EN)</span></span>
<span><span class="co">#&gt;  collate  en_US.UTF-8</span></span>
<span><span class="co">#&gt;  ctype    en_US.UTF-8</span></span>
<span><span class="co">#&gt;  tz       Europe/Madrid</span></span>
<span><span class="co">#&gt;  date     2025-05-27</span></span>
<span><span class="co">#&gt;  pandoc   2.16.2 @ /Users/gaborcsardi/.local/bin/ (via rmarkdown)</span></span>
<span><span class="co">#&gt;  quarto   1.5.55 @ /usr/local/bin/quarto</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ─ Packages ───────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;  package      * version    date (UTC) lib source</span></span>
<span><span class="co">#&gt;  arrow          20.0.0.2   2025-05-26 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  assertthat     0.2.1      2019-03-21 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  base64enc      0.1-3      2015-07-28 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  bit            4.6.0      2025-03-06 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  bit64          4.6.0-1    2025-01-16 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  cli            3.6.5.9000 2025-04-27 [1] local</span></span>
<span><span class="co">#&gt;  colorspace     2.1-1      2024-07-26 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  commonmark     1.9.5      2025-03-17 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  DBI            1.2.3      2024-06-02 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  digest         0.6.37     2024-08-19 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  dplyr        * 1.1.4      2023-11-17 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  duckdb         1.2.2      2025-04-29 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  evaluate       1.0.3      2025-01-10 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  farver         2.1.2      2024-05-13 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  fastmap        1.2.0      2024-05-15 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  fontawesome    0.5.3      2024-11-16 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  generics       0.1.3      2022-07-05 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  ggplot2        3.5.2      2025-04-09 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  glue           1.8.0      2024-09-30 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  gt           * 1.0.0      2025-04-05 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  gtable         0.3.6      2024-10-25 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  gtExtras     * 0.5.0      2023-09-15 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  htmltools      0.5.8.1    2024-04-04 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  htmlwidgets    1.6.4      2023-12-06 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  jsonlite       2.0.0      2025-03-27 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  keyring        1.4.0      2025-05-26 [1] local</span></span>
<span><span class="co">#&gt;  knitr          1.50       2025-03-16 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  labeling       0.4.3      2023-08-29 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  lifecycle      1.0.4      2023-11-07 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  litedown       0.7        2025-04-08 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  magrittr       2.0.3      2022-03-30 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  markdown       2.0        2025-03-23 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  munsell        0.5.1      2024-04-01 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  nanoparquet    0.4.2      2025-02-22 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  nycflights13   1.0.2      2021-04-12 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  paletteer      1.6.0      2024-01-21 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  pillar       * 1.10.2     2025-04-05 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  pkgconfig      2.0.3      2019-09-22 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  prettyunits    1.2.0      2023-09-24 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  purrr          1.0.4      2025-02-05 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  R6             2.6.1      2025-02-15 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  ragg           1.4.0      2025-04-10 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  rematch2       2.1.2      2020-05-01 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  rlang          1.1.6      2025-04-11 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  rmarkdown      2.29       2024-11-04 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  sass           0.4.10     2025-04-11 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  scales         1.3.0      2023-11-28 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  sessioninfo    1.2.3      2025-02-05 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  svglite        2.2.1      2025-05-12 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  systemfonts    1.2.3      2025-04-30 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  textshaping    1.0.1      2025-05-01 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  tibble         3.2.1      2023-03-20 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  tidyselect     1.2.1      2024-03-11 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  utf8           1.2.5      2025-05-01 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  vctrs          0.6.5      2023-12-01 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  withr          3.0.2      2024-10-28 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  xfun           0.52       2025-04-02 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  xml2           1.3.8      2025-03-14 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;  yaml           2.3.10     2024-07-26 [1] CRAN (R 4.5.0)</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt;  [1] /Users/gaborcsardi/Library/R/arm64/4.5/library</span></span>
<span><span class="co">#&gt;  [2] /Library/Frameworks/R.framework/Versions/4.5-arm64/Resources/library</span></span>
<span><span class="co">#&gt;  * ── Packages attached to the search path.</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; ──────────────────────────────────────────────────────────────────────────────</span></span></code></pre>
</div>
</div>
</section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, Hannes Mühleisen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

  </div></footer>
</body>
</html>
