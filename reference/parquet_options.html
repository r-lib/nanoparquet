<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Nanoparquet options — parquet_options • nanoparquet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Nanoparquet options — parquet_options"><meta name="description" content="Create a list of nanoparquet options."><meta property="og:description" content="Create a list of nanoparquet options."><script defer data-domain="nanoparquet.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nanoparquet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/benchmarks.html">Benchmarks</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2025/01/nanoparquet-0-4-0/">Version 0.4.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/06/nanoparquet-0-3-0/">Version 0.3.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/nanoparquet/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Nanoparquet options</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/nanoparquet/blob/main/R/options.R" class="external-link"><code>R/options.R</code></a></small>
      <div class="d-none name"><code>parquet_options.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a list of nanoparquet options.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">parquet_options</span><span class="op">(</span></span>
<span>  class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nanoparquet.class"</span>, <span class="st">"tbl"</span><span class="op">)</span>,</span>
<span>  compression_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nanoparquet.compression_level"</span>, <span class="cn">NA_integer_</span><span class="op">)</span>,</span>
<span>  keep_row_groups <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  num_rows_per_row_group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nanoparquet.num_rows_per_row_group"</span>, <span class="fl">10000000L</span><span class="op">)</span>,</span>
<span>  use_arrow_metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nanoparquet.use_arrow_metadata"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  write_arrow_metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nanoparquet.write_arrow_metadata"</span>, <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  write_data_page_version <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nanoparquet.write_data_page_version"</span>, <span class="fl">1L</span><span class="op">)</span>,</span>
<span>  write_minmax_values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"nanoparquet.write_minmax_values"</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-class">class<a class="anchor" aria-label="anchor" href="#arg-class"></a></dt>
<dd><p>The extra class or classes to add to data frames created
in <code><a href="read_parquet.html">read_parquet()</a></code>. By default nanoparquet adds the <code>"tbl"</code> class,
so data frames are printed differently if the pillar package is
loaded.</p></dd>


<dt id="arg-compression-level">compression_level<a class="anchor" aria-label="anchor" href="#arg-compression-level"></a></dt>
<dd><p>The compression level in <code><a href="write_parquet.html">write_parquet()</a></code>.
<code>NA</code> is the default, and it specifies the default
compression level of each method. <code>Inf</code> always selects the highest
possible compression level. More details:</p><ul><li><p>Snappy does not support compression levels currently.</p></li>
<li><p>GZIP supports levels from 0 (uncompressed), 1 (fastest), to 9 (best).
The default is 6.</p></li>
<li><p>ZSTD allows positive levels up to 22 currently. 20 and above require
more memory. Negative levels are also allowed, the lower the level,
the faster the speed, at the cost of compression. Currently the
smallest level is -131072. The default level is 3.</p></li>
</ul></dd>


<dt id="arg-keep-row-groups">keep_row_groups<a class="anchor" aria-label="anchor" href="#arg-keep-row-groups"></a></dt>
<dd><p>This option is used when appending to a Parquet
file with <code><a href="append_parquet.html">append_parquet()</a></code>. If <code>TRUE</code> then the existing row groups
of the file are always kept as is and nanoparquet creates new row
groups for the new data. If <code>FALSE</code> (the default), then the last row
group of the file will be overwritten if it is smaller than the
default row group size, i.e. <code>num_rows_per_row_group</code>.</p></dd>


<dt id="arg-num-rows-per-row-group">num_rows_per_row_group<a class="anchor" aria-label="anchor" href="#arg-num-rows-per-row-group"></a></dt>
<dd><p>The number of rows to put into a row
group, if row groups are not specified explicitly. It should be
an integer scalar. Defaults to 10 million.</p></dd>


<dt id="arg-use-arrow-metadata">use_arrow_metadata<a class="anchor" aria-label="anchor" href="#arg-use-arrow-metadata"></a></dt>
<dd><p><code>TRUE</code> or <code>FALSE</code>. If <code>TRUE</code>, then
<code><a href="read_parquet.html">read_parquet()</a></code> and <code><a href="read_parquet_schema.html">read_parquet_schema()</a></code> will make use of the Apache
Arrow metadata to assign R classes to Parquet columns.
This is currently used to detect factor columns, and to detect
"difftime" columns.</p>
<p>If this option is <code>FALSE</code>:</p><ul><li><p>"factor" columns are read as character vectors.</p></li>
<li><p>"difftime" columns are read as real numbers, meaning one
of seconds, milliseconds, microseconds or nanoseconds. Impossible
to tell which without using the Arrow metadata.</p></li>
</ul></dd>


<dt id="arg-write-arrow-metadata">write_arrow_metadata<a class="anchor" aria-label="anchor" href="#arg-write-arrow-metadata"></a></dt>
<dd><p>Whether to add the Apache Arrow types as
metadata to the file <code><a href="write_parquet.html">write_parquet()</a></code>.</p></dd>


<dt id="arg-write-data-page-version">write_data_page_version<a class="anchor" aria-label="anchor" href="#arg-write-data-page-version"></a></dt>
<dd><p>Data version to write by default.
Possible values are 1 and 2. Default is 1.</p></dd>


<dt id="arg-write-minmax-values">write_minmax_values<a class="anchor" aria-label="anchor" href="#arg-write-minmax-values"></a></dt>
<dd><p>Whether to write minimum and maximum values
per row group, for data types that support this in <code><a href="write_parquet.html">write_parquet()</a></code>.
However, nanoparquet currently does not support minimum and maximum
values for the <code>DECIMAL</code>, <code>UUID</code> and <code>FLOAT16</code> logical types and the
<code>BOOLEAN</code>, <code>BYTE_ARRAY</code> and <code>FIXED_LEN_BYTE_ARRAY</code> primitive types
if they are writing without a logical type. Currently the default
is <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of nanoparquet options.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># the effect of using Arrow metadata</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".parquet"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  fct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dft <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">as.difftime</a></span><span class="op">(</span><span class="fl">10</span>, units <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="write_parquet.html">write_parquet</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="read_parquet.html">read_parquet</a></span><span class="op">(</span><span class="va">tmp</span>, options <span class="op">=</span> <span class="fu">parquet_options</span><span class="op">(</span>use_arrow_metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="read_parquet.html">read_parquet</a></span><span class="op">(</span><span class="va">tmp</span>, options <span class="op">=</span> <span class="fu">parquet_options</span><span class="op">(</span>use_arrow_metadata <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, Hannes Mühleisen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

  </div></footer></body></html>

